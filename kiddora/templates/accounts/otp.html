{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OTP Verification - Kiddora</title>
    <script>
        let timeLeft = 300; // 5 minutes in seconds

        function countdown() {
            if(timeLeft <= 0) {
                document.getElementById('timer').innerText = "OTP expired. Please resend.";
                document.getElementById('submit-btn').disabled = true;
                return;
            }
            let minutes = Math.floor(timeLeft / 60);
            let seconds = timeLeft % 60;
            document.getElementById('timer').innerText = minutes + ":" + (seconds < 10 ? '0' : '') + seconds;
            timeLeft--;
            setTimeout(countdown, 1000);
        }

        window.onload = countdown;
    </script>
</head>
<body>
    <h2>Enter OTP</h2>

    {% if error %}
        <p style="color:red">{{ error }}</p>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        <input type="text" name="otp" placeholder="Enter OTP" required>
        <button type="submit" id="submit-btn">Verify OTP</button>
    </form>

    <p id="timer"></p>

    <form method="get" action="{% url 'accounts:resend_otp' user_id=user.id %}">
        <button type="submit">Resend OTP</button>
    </form>
</body>
</html>
