{% extends "base.html" %}
{% block content %}
<h2>
    {% if subcategory %}
        Products in {{ subcategory.subcategory_name }}
    {% else %}
        All Products
    {% endif %}
</h2>
<div class="categories">
  {% for cat in categories %}
    <a href="{% url 'products:category_products' cat.id %}">{{ cat.category_name }}</a>
  {% endfor %}
</div>
<div class="products">
  {% for product in products %}
    <div class="product">
      <a href="{% url 'products:product_detail' product.id %}">{{ product.product_name }}</a>
      <p>Price: {{ product.final_price }}</p>
    </div>
  {% endfor %}
</div>
<div class="pagination">
  {% if products.has_previous %}
    <a href="?page={{ products.previous_page_number }}">Previous</a>
  {% endif %}
  Page {{ products.number }} of {{ products.paginator.num_pages }}
  {% if products.has_next %}
    <a href="?page={{ products.next_page_number }}">Next</a>
  {% endif %}
</div>
{% endblock %}
